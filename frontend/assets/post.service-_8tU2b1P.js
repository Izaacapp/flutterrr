import{aa as i,ag as p,a9 as d}from"./index-BuZGzeB0.js";function m(e){var t=i.useContext(p()),s=e||t.client;return d(!!s,58),s}const r="https://www.xbullet.me";async function o(e,t={}){const s=localStorage.getItem("passport_buddy_token"),n=`${r}${e}`,a=await fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...t.headers},...t});if(!a.ok){const c=await a.json().catch(()=>({message:"Request failed"}));throw new Error(c.message||`HTTP ${a.status}`)}return a.json()}const l={async toggleLike(e){return o(`/api/v1/posts/${e}/like`,{method:"POST"})},async addComment(e,t){return o(`/api/v1/posts/${e}/comment`,{method:"POST",body:JSON.stringify({content:t})})},async deleteComment(e,t){return o(`/api/v1/posts/${e}/comment/${t}`,{method:"DELETE"})},async deletePost(e){return o(`/api/v1/posts/${e}`,{method:"DELETE"})},async incrementVideoViews(e){return o(`/api/v1/posts/${e}/views`,{method:"POST"})},async createPost(e){const t=localStorage.getItem("passport_buddy_token"),s=await fetch(`${r}/api/v1/posts`,{method:"POST",credentials:"include",headers:{...t&&{Authorization:`Bearer ${t}`}},body:e});if(!s.ok){const n=await s.json().catch(()=>({message:"Request failed"}));throw new Error(n.message||`HTTP ${s.status}`)}return s.json()},async sharePost(e){return o(`/api/v1/posts/${e}/share`,{method:"POST"})}};export{l as p,m as u};
