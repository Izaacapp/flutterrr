import{C as Vt,V as T,M as J,l as q,Q as Lt,S as xt,m as A,n as qt,P as Jt,o as Qt,r as y,p as $t,q as te,s as C,B as gt,F as bt,t as ee,v as Ot,w as ie,W as oe,A as se,D as ne,x as Pt,y as jt,z as U,E as ae,G as re,H as Nt,I as G,L as tt,J as et,K as it,j as D,f as le,N as he,O as ce}from"./index-BuZGzeB0.js";const kt={type:"change"},wt={type:"start"},vt={type:"end"},pt=new qt,It=new Jt,de=Math.cos(70*Qt.DEG2RAD),M=new T,R=2*Math.PI,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Mt=1e-6;class ue extends Vt{constructor(t,e=null){super(t,e),this.state=a.NONE,this.enabled=!0,this.target=new T,this.cursor=new T,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:J.ROTATE,MIDDLE:J.DOLLY,RIGHT:J.PAN},this.touches={ONE:q.ROTATE,TWO:q.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new T,this._lastQuaternion=new Lt,this._lastTargetPosition=new T,this._quat=new Lt().setFromUnitVectors(t.up,new T(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new xt,this._sphericalDelta=new xt,this._scale=1,this._panOffset=new T,this._rotateStart=new A,this._rotateEnd=new A,this._rotateDelta=new A,this._panStart=new A,this._panEnd=new A,this._panDelta=new A,this._dollyStart=new A,this._dollyEnd=new A,this._dollyDelta=new A,this._dollyDirection=new T,this._mouse=new A,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=me.bind(this),this._onPointerDown=pe.bind(this),this._onPointerUp=_e.bind(this),this._onContextMenu=we.bind(this),this._onMouseWheel=ge.bind(this),this._onKeyDown=be.bind(this),this._onTouchStart=Pe.bind(this),this._onTouchMove=Me.bind(this),this._onMouseDown=ye.bind(this),this._onMouseMove=fe.bind(this),this._interceptControlDown=Ee.bind(this),this._interceptControlUp=De.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(kt),this.update(),this.state=a.NONE}update(t=null){const e=this.object.position;M.copy(e).sub(this.target),M.applyQuaternion(this._quat),this._spherical.setFromVector3(M),this.autoRotate&&this.state===a.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let o=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(o)&&isFinite(n)&&(o<-Math.PI?o+=R:o>Math.PI&&(o-=R),n<-Math.PI?n+=R:n>Math.PI&&(n-=R),o<=n?this._spherical.theta=Math.max(o,Math.min(n,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(o+n)/2?Math.max(o,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let d=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const g=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),d=g!=this._spherical.radius}if(M.setFromSpherical(this._spherical),M.applyQuaternion(this._quatInverse),e.copy(this.target).add(M),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let g=null;if(this.object.isPerspectiveCamera){const L=M.length();g=this._clampDistance(L*this._scale);const B=L-g;this.object.position.addScaledVector(this._dollyDirection,B),this.object.updateMatrixWorld(),d=!!B}else if(this.object.isOrthographicCamera){const L=new T(this._mouse.x,this._mouse.y,0);L.unproject(this.object);const B=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),d=B!==this.object.zoom;const ot=new T(this._mouse.x,this._mouse.y,0);ot.unproject(this.object),this.object.position.sub(ot).add(L),this.object.updateMatrixWorld(),g=M.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;g!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(g).add(this.object.position):(pt.origin.copy(this.object.position),pt.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(pt.direction))<de?this.object.lookAt(this.target):(It.setFromNormalAndCoplanarPoint(this.object.up,this.target),pt.intersectPlane(It,this.target))))}else if(this.object.isOrthographicCamera){const g=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),g!==this.object.zoom&&(this.object.updateProjectionMatrix(),d=!0)}return this._scale=1,this._performCursorZoom=!1,d||this._lastPosition.distanceToSquared(this.object.position)>Mt||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Mt||this._lastTargetPosition.distanceToSquared(this.target)>Mt?(this.dispatchEvent(kt),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?R/60*this.autoRotateSpeed*t:R/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){M.setFromMatrixColumn(e,0),M.multiplyScalar(-t),this._panOffset.add(M)}_panUp(t,e){this.screenSpacePanning===!0?M.setFromMatrixColumn(e,1):(M.setFromMatrixColumn(e,0),M.crossVectors(this.object.up,M)),M.multiplyScalar(t),this._panOffset.add(M)}_pan(t,e){const o=this.domElement;if(this.object.isPerspectiveCamera){const n=this.object.position;M.copy(n).sub(this.target);let d=M.length();d*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*d/o.clientHeight,this.object.matrix),this._panUp(2*e*d/o.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/o.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/o.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const o=this.domElement.getBoundingClientRect(),n=t-o.left,d=e-o.top,g=o.width,L=o.height;this._mouse.x=n/g*2-1,this._mouse.y=-(d/L)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(R*this._rotateDelta.x/e.clientHeight),this._rotateUp(R*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateUp(R*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateUp(-R*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateLeft(R*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateLeft(-R*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),o=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(o,n)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),o=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(o,n)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),o=t.pageX-e.x,n=t.pageY-e.y,d=Math.sqrt(o*o+n*n);this._dollyStart.set(0,d)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const o=this._getSecondPointerPosition(t),n=.5*(t.pageX+o.x),d=.5*(t.pageY+o.y);this._rotateEnd.set(n,d)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(R*this._rotateDelta.x/e.clientHeight),this._rotateUp(R*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),o=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(o,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),o=t.pageX-e.x,n=t.pageY-e.y,d=Math.sqrt(o*o+n*n);this._dollyEnd.set(0,d),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const g=(t.pageX+e.x)*.5,L=(t.pageY+e.y)*.5;this._updateZoomParameters(g,L)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new A,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,o={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:o.deltaY*=16;break;case 2:o.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(o.deltaY*=10),o}}function pe(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function me(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function _e(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(vt),this.state=a.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function ye(i){let t;switch(i.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case J.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=a.DOLLY;break;case J.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=a.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=a.ROTATE}break;case J.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=a.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=a.PAN}break;default:this.state=a.NONE}this.state!==a.NONE&&this.dispatchEvent(wt)}function fe(i){switch(this.state){case a.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case a.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case a.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function ge(i){this.enabled===!1||this.enableZoom===!1||this.state!==a.NONE||(i.preventDefault(),this.dispatchEvent(wt),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(vt))}function be(i){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(i)}function Pe(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case q.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=a.TOUCH_ROTATE;break;case q.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=a.TOUCH_PAN;break;default:this.state=a.NONE}break;case 2:switch(this.touches.TWO){case q.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=a.TOUCH_DOLLY_PAN;break;case q.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=a.TOUCH_DOLLY_ROTATE;break;default:this.state=a.NONE}break;default:this.state=a.NONE}this.state!==a.NONE&&this.dispatchEvent(wt)}function Me(i){switch(this._trackPointer(i),this.state){case a.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case a.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case a.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case a.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=a.NONE}}function we(i){this.enabled!==!1&&i.preventDefault()}function Ee(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function De(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const K={ATL:{lat:33.6407,lon:-84.4277,city:"Atlanta"},LAX:{lat:33.9425,lon:-118.4081,city:"Los Angeles"},ORD:{lat:41.9742,lon:-87.9073,city:"Chicago"},DFW:{lat:32.8998,lon:-97.0403,city:"Dallas/Fort Worth"},JFK:{lat:40.6413,lon:-73.7781,city:"New York"},DEN:{lat:39.8561,lon:-104.6737,city:"Denver"},SFO:{lat:37.6213,lon:-122.379,city:"San Francisco"},LAS:{lat:36.084,lon:-115.1537,city:"Las Vegas"},SEA:{lat:47.4502,lon:-122.3088,city:"Seattle"},CLT:{lat:35.2144,lon:-80.9473,city:"Charlotte"},MCO:{lat:28.4312,lon:-81.3081,city:"Orlando"},MIA:{lat:25.7959,lon:-80.287,city:"Miami"},PHX:{lat:33.4352,lon:-112.0101,city:"Phoenix"},IAH:{lat:29.9902,lon:-95.3368,city:"Houston"},BOS:{lat:42.3656,lon:-71.0096,city:"Boston"},MSP:{lat:44.8848,lon:-93.2223,city:"Minneapolis"},FLL:{lat:26.0742,lon:-80.1506,city:"Fort Lauderdale"},DTW:{lat:42.2162,lon:-83.3554,city:"Detroit"},PHL:{lat:39.8729,lon:-75.2437,city:"Philadelphia"},LGA:{lat:40.7769,lon:-73.874,city:"New York (LaGuardia)"},BWI:{lat:39.1774,lon:-76.6684,city:"Baltimore"},SLC:{lat:40.7899,lon:-111.9791,city:"Salt Lake City"},DCA:{lat:38.8512,lon:-77.0402,city:"Washington DC"},IAD:{lat:38.9531,lon:-77.4565,city:"Washington (Dulles)"},MDW:{lat:41.7868,lon:-87.7522,city:"Chicago (Midway)"},SAN:{lat:32.7338,lon:-117.1933,city:"San Diego"},TPA:{lat:27.9797,lon:-82.5352,city:"Tampa"},HNL:{lat:21.3211,lon:-157.9225,city:"Honolulu"},PDX:{lat:45.5898,lon:-122.5951,city:"Portland"},DAL:{lat:32.8442,lon:-96.8404,city:"Dallas (Love Field)"},STL:{lat:38.7499,lon:-90.3748,city:"St. Louis"},BNA:{lat:36.1263,lon:-86.6774,city:"Nashville"},AUS:{lat:30.1975,lon:-97.6664,city:"Austin"},HOU:{lat:29.6454,lon:-95.2789,city:"Houston (Hobby)"},OAK:{lat:37.7126,lon:-122.2197,city:"Oakland"},SMF:{lat:38.6954,lon:-121.5908,city:"Sacramento"},MSY:{lat:29.9918,lon:-90.262,city:"New Orleans"},RDU:{lat:35.8776,lon:-78.7875,city:"Raleigh-Durham"},SJC:{lat:37.3639,lon:-121.9289,city:"San Jose"},SNA:{lat:33.6762,lon:-117.8674,city:"Orange County"},MCI:{lat:39.2976,lon:-94.7139,city:"Kansas City"},CLE:{lat:41.4058,lon:-81.8539,city:"Cleveland"},SAT:{lat:29.5337,lon:-98.4683,city:"San Antonio"},PIT:{lat:40.4919,lon:-80.2352,city:"Pittsburgh"},RSW:{lat:26.5342,lon:-81.7552,city:"Fort Myers"},IND:{lat:39.7169,lon:-86.2956,city:"Indianapolis"},CMH:{lat:39.9999,lon:-82.8872,city:"Columbus"},CVG:{lat:39.0499,lon:-84.6621,city:"Cincinnati"},BDL:{lat:41.9389,lon:-72.686,city:"Hartford"},PBI:{lat:26.6831,lon:-80.0927,city:"West Palm Beach"},JAX:{lat:30.4941,lon:-81.6879,city:"Jacksonville"},ANC:{lat:61.1743,lon:-149.9962,city:"Anchorage"},BUF:{lat:42.9405,lon:-78.7314,city:"Buffalo"},ABQ:{lat:35.0433,lon:-106.6092,city:"Albuquerque"},EWR:{lat:40.6895,lon:-74.1745,city:"Newark"},OMA:{lat:41.3,lon:-95.8947,city:"Omaha"},RIC:{lat:37.5043,lon:-77.3197,city:"Richmond"},OKC:{lat:35.3931,lon:-97.5975,city:"Oklahoma City"},MKE:{lat:42.9476,lon:-87.8966,city:"Milwaukee"},MEM:{lat:35.0421,lon:-89.9792,city:"Memphis"},YYZ:{lat:43.6777,lon:-79.6248,city:"Toronto"},YVR:{lat:49.1967,lon:-123.1815,city:"Vancouver"},YUL:{lat:45.4706,lon:-73.7408,city:"Montreal"},YYC:{lat:51.1315,lon:-114.0105,city:"Calgary"},MEX:{lat:19.4363,lon:-99.0721,city:"Mexico City"},CUN:{lat:21.0365,lon:-86.8771,city:"Cancun"},LHR:{lat:51.47,lon:-.4543,city:"London"},CDG:{lat:49.0097,lon:2.5479,city:"Paris"},FRA:{lat:50.0379,lon:8.5622,city:"Frankfurt"},AMS:{lat:52.3105,lon:4.7683,city:"Amsterdam"},MAD:{lat:40.4983,lon:-3.5676,city:"Madrid"},BCN:{lat:41.2974,lon:2.0833,city:"Barcelona"},FCO:{lat:41.8003,lon:12.2389,city:"Rome"},MUC:{lat:48.3537,lon:11.775,city:"Munich"},ZRH:{lat:47.4647,lon:8.5492,city:"Zurich"},VIE:{lat:48.1103,lon:16.5697,city:"Vienna"},CPH:{lat:55.618,lon:12.6508,city:"Copenhagen"},DUB:{lat:53.4264,lon:-6.2499,city:"Dublin"},ARN:{lat:59.6519,lon:17.9186,city:"Stockholm"},OSL:{lat:60.1975,lon:11.1004,city:"Oslo"},HEL:{lat:60.3172,lon:24.9633,city:"Helsinki"},NRT:{lat:35.7647,lon:140.3864,city:"Tokyo"},HND:{lat:35.5494,lon:139.7798,city:"Tokyo (Haneda)"},ICN:{lat:37.4602,lon:126.4407,city:"Seoul"},HKG:{lat:22.308,lon:113.9185,city:"Hong Kong"},SIN:{lat:1.3644,lon:103.9915,city:"Singapore"},BKK:{lat:13.69,lon:100.7501,city:"Bangkok"},SYD:{lat:-33.9399,lon:151.1753,city:"Sydney"},MEL:{lat:-37.6733,lon:144.8433,city:"Melbourne"},AKL:{lat:-37.0082,lon:174.785,city:"Auckland"},DXB:{lat:25.2532,lon:55.3657,city:"Dubai"},GRU:{lat:-23.4356,lon:-46.4731,city:"São Paulo"},GIG:{lat:-22.8099,lon:-43.2505,city:"Rio de Janeiro"},EZE:{lat:-34.8222,lon:-58.5358,city:"Buenos Aires"},JNB:{lat:-26.1392,lon:28.246,city:"Johannesburg"}},Ae=()=>{const i=y.useRef(null),t=y.useRef(null),e=y.useRef(null),o=y.useRef(null),n=y.useRef(null),d=y.useRef(null),[g,L]=y.useState([]),[B,ot]=y.useState(!0),[Y,Yt]=y.useState(null),[Et,zt]=y.useState(null),st=y.useRef(null),Dt=y.useRef(new T(0,0,0)),mt=y.useRef(null),nt=y.useRef([]),_t=y.useRef(null),at=y.useRef(null),W=y.useRef(null),z=y.useRef("middle");$t();const[Se,Ce]=y.useState(!1),Ht=(s,w,h,S,E="M")=>{const u=Math.PI*s/180,r=Math.PI*h/180,p=w-S,j=Math.PI*p/180;let m=Math.sin(u)*Math.sin(r)+Math.cos(u)*Math.cos(r)*Math.cos(j);return m=Math.acos(m),m=m*180/Math.PI,m=m*60*1.1515,E==="K"&&(m=m*1.609344),E==="N"&&(m=m*.8684),Math.round(m)},rt=(s,w,h)=>{const S=s*(Math.PI/180),E=-w*(Math.PI/180),u=h*Math.cos(S)*Math.cos(E),r=h*Math.sin(S),p=h*Math.cos(S)*Math.sin(E);return new T(u,r,p)},St=(s,w)=>{const h=[];for(let E=0;E<=20;E++){const u=E/20,r=new T().lerpVectors(s,w,u),p=2.02+Math.sin(u*Math.PI)*.2;r.normalize().multiplyScalar(p),h.push(r)}return new he(h,!1,"catmullrom",.5)},Ft=(s,w)=>{_t.current&&cancelAnimationFrame(_t.current);let h=0;const S=()=>{var r;h+=.001,h>1&&(h=0);const E=s.getPoint(h),u=s.getPoint((h+.01)%1);if(w.position.copy(E),w.lookAt(u),h%.005<.001){const p=new Pt(.008,6,6),j=new ce({color:16777215,transparent:!0,opacity:.8}),m=new U(p,j);m.position.copy(E),(r=e.current)==null||r.add(m);let H=.8;const _=()=>{var b;H-=.005,j.opacity=H,H>0?requestAnimationFrame(_):(b=e.current)==null||b.remove(m)};_()}_t.current=requestAnimationFrame(S)};S()};return y.useEffect(()=>{(async()=>{try{const h=(await le.getMyFlights()).flights.filter(S=>S.status==="completed");L(h)}catch(w){console.error("Error loading flights:",w)}finally{ot(!1)}})()},[]),y.useEffect(()=>{if(!i.current)return;const s=new te;s.background=new C(16118783),t.current=s;const w=new gt,h=[];for(let l=0;l<1e3;l++){const c=(Math.random()-.5)*100,P=(Math.random()-.5)*100,f=(Math.random()-.5)*100;h.push(c,P,f)}w.setAttribute("position",new bt(h,3));const S=new ee({color:14538494,size:.08,transparent:!0,opacity:.4}),E=new Ot(w,S);s.add(E);const u=new ie(75,i.current.clientWidth/i.current.clientHeight,.1,1e3);u.position.z=8,at.current=u;const r=new oe({antialias:!0});r.setSize(i.current.clientWidth,i.current.clientHeight),r.setPixelRatio(window.devicePixelRatio),i.current.appendChild(r.domElement),n.current=r;const p=new ue(u,r.domElement);p.enableDamping=!0,p.dampingFactor=.05,p.rotateSpeed=.5,p.minDistance=4,p.maxDistance=20,p.autoRotate=!0,p.autoRotateSpeed=.2,W.current=p;const j=new se(16777215,.4);s.add(j);const m=new ne(16777215,.8);m.position.set(5,3,5),s.add(m);const H=new Pt(2,64,64),_=new jt({color:12891645,emissive:15324671,emissiveIntensity:.2,shininess:50}),b=new U(H,_);let O=0,N=0,k=0;g.forEach(l=>{const c=K[l.origin.airportCode],P=K[l.destination.airportCode];c&&(O+=c.lat,N+=c.lon,k++),P&&(O+=P.lat,N+=P.lon,k++)}),k>0?(O/=k,N/=k,b.rotation.y=-(N*Math.PI/180),b.rotation.x=O*Math.PI/180*.3):b.rotation.y=-Math.PI/2,s.add(b),e.current=b;const x=new ae;x.load("https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg",l=>{_.map=l,_.color=new C(16777215),_.needsUpdate=!0},void 0,()=>{x.load("https://eoimages.gsfc.nasa.gov/images/imagerecords/74000/74393/world.topo.200407.3x5400x2700.jpg",l=>{_.map=l,_.color=new C(16777215),_.needsUpdate=!0})}),x.load("https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_normal_2048.jpg",l=>{_.normalMap=l,_.normalScale=new A(.5,.5),_.needsUpdate=!0});const Z=new Pt(2.1,64,64),lt=new jt({color:14538494,transparent:!0,opacity:.2,side:re}),ht=new U(Z,lt);s.add(ht),o.current=ht;const F=new Nt;b.add(F);const I=new Nt,X=G.getMaterial("airplane");if(X){const l=G.getGeometry("airplane_body");if(l){const f=new U(l,X);f.rotation.z=Math.PI/2,I.add(f)}const c=G.getGeometry("airplane_wing");if(c){const f=new U(c,X);I.add(f)}const P=G.getGeometry("airplane_tail");if(P){const f=new U(P,X);f.position.x=-.03,I.add(f)}}I.visible=!1,b.add(I),st.current=I,g.forEach(l=>{const c=K[l.origin.airportCode],P=K[l.destination.airportCode];if(c&&P){const f=rt(c.lat,c.lon,2.01),ct=rt(P.lat,P.lon,2.01),dt=G.getGeometry("airport_marker"),Ct=G.getMaterial("origin_marker"),Tt=G.getMaterial("dest_marker");if(dt&&Ct){const v=new U(dt,Ct);v.position.copy(f),F.add(v)}if(dt&&Tt){const v=new U(dt,Tt);v.position.copy(ct),F.add(v)}const yt=St(f,ct).getPoints(100),ft=new gt().setFromPoints(yt),Rt=[],Ut=new C(16711935),At=new C(4194559),Kt=new C(255);for(let v=0;v<yt.length;v++){const ut=v/(yt.length-1);let V;ut<.5?V=new C().lerpColors(Ut,At,ut*2):V=new C().lerpColors(At,Kt,(ut-.5)*2);const Xt=.7+Math.sin(ut*Math.PI)*.3;V.multiplyScalar(Xt),Rt.push(V.r,V.g,V.b)}ft.setAttribute("color",new bt(Rt,3));const Zt=new tt({vertexColors:!0,opacity:.8,transparent:!0,linewidth:2,blending:et}),Gt=new it(ft,Zt);F.add(Gt);const Bt=new tt({vertexColors:!0,opacity:.3,transparent:!0,linewidth:4,blending:et}),Wt=new it(ft.clone(),Bt);F.add(Wt)}});const Q=()=>{if(d.current=requestAnimationFrame(Q),b.rotation.y-=3e-4,o.current&&(o.current.rotation.y+=4e-4),t.current){const l=t.current.children.find(c=>c instanceof Ot);l&&(l.rotation.y+=1e-4)}Dt.current&&z.current==="middle"&&!Y&&u.position.lerp(Dt.current,.05),p.update(),r.render(s,u)};Q();const $=()=>{if(!i.current)return;const l=i.current.clientWidth,c=i.current.clientHeight;u.aspect=l/c,u.updateProjectionMatrix(),r.setSize(l,c),r.setPixelRatio(Math.min(window.devicePixelRatio,2))};return window.addEventListener("resize",$),$(),()=>{window.removeEventListener("resize",$),d.current&&cancelAnimationFrame(d.current),i.current&&r.domElement&&i.current.removeChild(r.domElement),r.dispose()}},[g]),D.jsxs("div",{className:"earth-container",children:[D.jsxs("div",{className:"earth-header",children:[D.jsx("h1",{children:"Flight Earth View"}),D.jsxs("div",{className:"earth-stats",children:[D.jsxs("div",{className:"stat",children:[D.jsx("span",{className:"stat-value",children:g.length}),D.jsx("span",{className:"stat-label",children:"Flights"})]}),Y&&Et&&D.jsxs("div",{className:"stat",children:[D.jsx("span",{className:"stat-value",children:Et.toLocaleString()}),D.jsx("span",{className:"stat-label",children:"Miles"})]})]})]}),D.jsx("div",{className:"earth-canvas",ref:i}),D.jsxs("div",{className:"flight-list",children:[D.jsx("h3",{children:"Your Flights"}),B?D.jsx("p",{children:"Loading flights..."}):D.jsx("div",{className:"flight-items",children:g.map(s=>{const w=K[s.origin.airportCode],h=K[s.destination.airportCode],S=w&&h?Ht(w.lat,w.lon,h.lat,h.lon,"M"):0;return D.jsxs("div",{className:`flight-item ${(Y==null?void 0:Y._id)===s._id?"selected":""}`,onClick:()=>{var j,m,H;const E=K[s.origin.airportCode],u=K[s.destination.airportCode];if(!E||!u)return;const r=rt(E.lat,E.lon,2.02),p=rt(u.lat,u.lon,2.02);if((Y==null?void 0:Y._id)===s._id)z.current==="middle"?z.current="origin":z.current==="origin"?z.current="destination":z.current="middle";else if(Yt(s),zt(S),z.current="middle",st.current&&t.current){const _=St(r,p);mt.current&&e.current&&e.current.remove(mt.current),nt.current.forEach(c=>{e.current&&e.current.remove(c)}),nt.current=[];const b=_.getPoints(100),O=new gt().setFromPoints(b),N=[],k=new C(16711935),x=new C(8388863),Z=new C(33023),lt=new C(65535);for(let c=0;c<b.length;c++){const P=c/(b.length-1);let f;P<.33?f=new C().lerpColors(k,x,P*3):P<.67?f=new C().lerpColors(x,Z,(P-.33)*3):f=new C().lerpColors(Z,lt,(P-.67)*3);const ct=.8+Math.sin(P*Math.PI*2)*.2;f.multiplyScalar(ct*1.5),N.push(f.r,f.g,f.b)}O.setAttribute("color",new bt(N,3));const ht=new tt({vertexColors:!0,opacity:1,transparent:!0,linewidth:4,blending:et}),F=new it(O,ht);(j=e.current)==null||j.add(F),mt.current=F;const I=O.clone(),X=new tt({vertexColors:!0,opacity:.4,transparent:!0,linewidth:8,blending:et}),Q=new it(I,X);(m=e.current)==null||m.add(Q),nt.current.push(Q);const $=new tt({vertexColors:!0,opacity:.2,transparent:!0,linewidth:12,blending:et}),l=new it(I.clone(),$);(H=e.current)==null||H.add(l),nt.current.push(l),st.current.visible=!0,Ft(_,st.current)}if(at.current&&W.current){W.current.autoRotate=!1;let _;const b=3.5;switch(z.current){case"origin":_=r.clone().normalize().multiplyScalar(b);break;case"destination":_=p.clone().normalize().multiplyScalar(b);break;case"middle":default:_=new T().addVectors(r,p).multiplyScalar(.5).normalize().multiplyScalar(b);break}const O=at.current.position.clone(),N=W.current.target.clone(),k=new T(0,0,0);let x=0;const Z=()=>{x+=.03,x<=1&&(at.current.position.lerpVectors(O,_,x),W.current.target.lerpVectors(N,k,x),W.current.update(),requestAnimationFrame(Z))};Z()}},children:[D.jsxs("div",{className:"flight-route",children:[s.origin.airportCode," → ",s.destination.airportCode]}),D.jsxs("div",{className:"flight-details",children:[s.airline," ",s.flightNumber," • ",S," miles"]})]},s._id)})})]})]})};export{Ae as Earth};
